#import "@/shared/api/fragments/product-core.fragment.graphql"
#import "@/shared/api/fragments/product-simple-core.fragment.graphql"

query  GetProductListCategory(
    $n: Int!,
    $after: String,
    $where: ProductCategoryToProductConnectionWhereArgs,
    $slug: ID!,
    $variationsFirst: Int = 50,
){
    productCategory(id: $slug, idType: SLUG) {
        databaseId
        count
        products(first: $n, after: $after, where: $where) {
            pageInfo { endCursor hasNextPage }
            nodes {
                __typename
                id
                databaseId
                name
                uri
                sku
                title
                image { ...ImageCore }
                galleryImages {
                    nodes {
                        ...ImageCore
                    }
                }
                ... on SimpleProduct {
                    price
                    regularPrice
                    salePrice
                }
                ... on VariableProduct {
                    price
                    regularPrice
                    salePrice
                    variations(first: $variationsFirst) {
                        nodes {
                            databaseId
                            price
                            regularPrice
                            salePrice
                            onSale
                        }
                    }
                    defaultAttributes(first: 20) {
                        nodes {
                            name
                            value
                            attributeId
                        }
                    }
                }
            }
        }
    }
}
