fragment CartCore on Cart {
    subtotal
    total
    contents {
        itemCount
        nodes {
            key
            quantity
            total
            extraData {
                key
                value
            }
            variation {
                attributes {
                    name
                    value
                    label
                }
                node {
                    databaseId
                    name
                    sku
                    price
                    regularPrice
                    salePrice
                    onSale
                }
            }
            product {
                node {
                    ...ProductCore
                    ...on SimpleProduct {
                        ...ProductSimpleCore
                    }
                    ...on VariableProduct {
                        ...ProductVariableCore

                    }
                }
            }

        }
    }
}

query GetCart($variationsFirst: Int = 25) {
    cart {
        ...CartCore
    }
}

mutation AddToCart($productId: Int!, $quantity: Int!, $variationsFirst: Int = 25) {
    addToCart(input: { productId: $productId, quantity: $quantity }) {
        cart {
            ...CartCore
        }
    }
}

mutation AddVariableToCart (
    $variationsFirst: Int = 25
    $productId: Int!
    $variationId: Int
    $quantity: Int! = 1
    $attributes: [ProductAttributeInput!]!
    $extraData: String
) {
    addToCart(
        input: {
            productId: $productId
            quantity: $quantity
            variationId: $variationId
            variation: $attributes
            extraData: $extraData
        }
    ) {
        cart {
            ...CartCore
        }
    }
}

mutation RemoveFromCart($keys: [ID!]!, $all: Boolean, $variationsFirst: Int = 25) {
    removeItemsFromCart(input: { keys: $keys, all: $all }) {
        cart {
            ...CartCore
        }
    }
}

mutation UpdateCartItemQuantities($variationsFirst: Int = 25,$items: [CartItemQuantityInput!]!) {
    updateItemQuantities(input: { items: $items }) {
        cart {
            ...CartCore
        }
    }
}
